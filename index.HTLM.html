<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>꿈나래 모의카페</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Gowun Dodum', sans-serif; text-align: center; background: #f3f3f3; margin: 0; padding: 0; }
    .container { max-width: 600px; margin: 50px auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h1 { font-size: 2.5em; color: #000000; margin-bottom: 10px; }
    h1::before { content: "\2615\FE0F"; font-size: 1.3em; margin-right: 8px; animation: steam 1.5s infinite ease-in-out alternate; display: inline-block; }
    @keyframes steam {
      0% { transform: translateY(0px); opacity: 1; }
      100% { transform: translateY(-5px); opacity: 0.5; }
    }
    h2 { font-size: 1.5em; margin-bottom: 5px; }
    .subtitle { color: #666; font-size: 1.2em; margin-bottom: 30px; }
    .step { display: none; }
    .step.active { display: block; }
    button {
      color: #333;
      padding: 16px 24px;
      margin: 12px;
      border: none;
      border-radius: 8px;
      font-size: 20px;
      cursor: pointer;
      transition: transform 0.2s ease;
      font-family: 'Gowun Dodum', sans-serif;
    }
    button:hover { transform: scale(1.05); }
    .menu-btn { display: block; width: 80%; margin: 12px auto; font-size: 22px; }
    .menu-btn.americano { background-color: #d0f0ff; }
    .menu-btn.latte { background-color: #e6f9d5; }
    .menu-btn.vanilla { background-color: #fff9c4; }
    #step2 button:first-child { background-color: #ff6666; }
    #step2 button:last-child { background-color: #b3e5fc; }
    #step3 button,
    #step4 button,
    #step5 button,
    #step6 button {
      background-color: #b3e5fc;
    }
    #order-summary {
      font-size: 24px;
      font-weight: bold;
      margin: 20px 0;
      white-space: pre-line;
      color: #8e24aa;
      background-color: #f3e5f5;
      padding: 12px;
      border-radius: 8px;
    }
    input[type="text"] {
      padding: 12px;
      width: 90%;
      font-size: 20px;
      margin: 10px 0 20px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-family: 'Gowun Dodum', sans-serif;
    }
    .step p strong {
      font-size: 1.3em;
      display: block;
      margin: 10px auto;
      padding: 10px;
      border-radius: 20px;
      max-width: 90%;
      line-height: 1.6;
      background-color: #f9f9f9;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>꿈나래 모의카페</h1>
    <div class="subtitle">Kkumnarae Mock Cafe</div>

    <div class="step active" id="step1">
      <h2>1단계: 메뉴를 선택하세요</h2>
      <div class="subtitle">Step 1: Choose a menu</div>
      <button class="menu-btn americano" onclick="selectMenu('아메리카노', 'Americano')">아메리카노 (Americano)</button>
      <button class="menu-btn latte" onclick="selectMenu('카페라떼', 'Cafe Latte')">카페라떼 (Cafe Latte)</button>
      <button class="menu-btn vanilla" onclick="selectMenu('바닐라라떼', 'Vanilla Latte')">바닐라라떼 (Vanilla Latte)</button>
    </div>

    <div class="step" id="step2">
      <h2>2단계: 온도를 선택하세요</h2>
      <div class="subtitle">Step 2: Choose temperature</div>
      <button onclick="selectTemperature('핫', 'Hot')">🔥 핫 (Hot)</button>
      <button onclick="selectTemperature('아이스', 'Iced')">❄️ 아이스 (Iced)</button>
    </div>

    <div class="step" id="step3">
      <h2>3단계: 주문 확인</h2>
      <div class="subtitle">Step 3: Confirm your order</div>
      <p id="order-summary"></p>
      <button onclick="goToMission()">주문 완료 (Complete Order)</button>
    </div>

    <div class="step" id="step4">
      <h2>🎯 미션 1</h2>
      <div class="subtitle">Mission 1</div>
      <p><strong>앞에 있는 꿈나래반 친구와 하이파이브! 🙌<br>High-five with the Kkumnarae friend in front of you! 🙌</strong></p>
      <button onclick="goToMission2()">다음 (Next)</button>
    </div>

    <div class="step" id="step5">
      <h2>📝 미션 2</h2>
      <div class="subtitle">Mission 2</div>
      <p><strong>주문서에 성함을 알려주세요<br>Please enter your name for the order</strong></p>
      <input type="text" id="nameInput" placeholder="이름을 입력해주세요">
      <br>
      <button onclick="finishOrder()">제출 (Submit)</button>
    </div>

    <div class="step" id="step6">
      <h2>✨ 감사합니다!</h2>
      <div class="subtitle">Thank you!</div>
      <p><span id="finalName"></span>님의 주문이 완료되었습니다. ☕<br>Your order is complete. Enjoy!</p>
      <button onclick="resetKiosk()">처음으로 (Start Over)</button>
    </div>
  </div>

  <script>
    let selectedMenu = '';
    let selectedMenuEng = '';
    let selectedTemp = '';
    let selectedTempEng = '';
    const orderList = [];

    function showStep(id) {
      document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function selectMenu(menu, menuEng) {
      selectedMenu = menu;
      selectedMenuEng = menuEng;
      showStep('step2');
    }

    function selectTemperature(temp, tempEng) {
      selectedTemp = temp;
      selectedTempEng = tempEng;
      document.getElementById('order-summary').textContent = `주문하신 메뉴 (Your order):\n${selectedMenu} (${selectedTemp}) / ${selectedMenuEng} (${selectedTempEng})`;
      showStep('step3');
    }

    function goToMission() {
      showStep('step4');
    }

    function goToMission2() {
      showStep('step5');
    }

    function finishOrder() {
      const name = document.getElementById('nameInput').value;
      if (!name.trim()) {
        alert("이름을 입력해주세요!");
        return;
      }
      orderList.push({ name, order: `${selectedMenu} (${selectedTemp})` });
      document.getElementById('finalName').textContent = name;
      showStep('step6');
      console.log("주문 목록:", orderList);

      fetch("https://script.google.com/macros/s/AKfycbw6o0TbvVi3P5P520jDdXq-TIaCUZVO9YBbk1-PzD-bgUlrOMqG4Hbs7My0sULDbehd8Q/exec", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          name: name,
          order: `${selectedMenu} (${selectedTemp})`
        })
      });
    }

    function resetKiosk() {
      selectedMenu = '';
      selectedMenuEng = '';
      selectedTemp = '';
      selectedTempEng = '';
      document.getElementById('nameInput').value = '';
      document.getElementById('order-summary').textContent = '';
      showStep('step1');
    }
  </script>
</body>
</html>
